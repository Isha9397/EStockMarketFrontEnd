<body background="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQMHK3Apc7JfKVVD6g5D3Tqcu_gsU6bqQIOuMkPZYq_LTCEqmxoup8pIlaclNNN4TbYhLo&usqp=CAU" style="background-size:cover ; height:fit-content;">
<header style="background-color:mediumslateblue;position:absolute;width: 100%;height: 70px;text-align : center;top: 0;">
    <!-- <nav class ="navbar navbar-expand-md navbar-dark bg-dark"> -->
    <div class="inline form" style="text-align:right; top: 50%;">
        <p style="text-align:center; font-size:20px;">EStockMarket<p>  
        <button class="btn btn-info" mat-button color="danger">Courses</button>
        <button class="btn btn-info" mat-button color="danger">Webinars</button>
        <button class="btn btn-info" (click)="goToLogout()" mat-button color="danger">LogOut</button>
        </div>
        <!-- </nav>  -->
</header>

<br><br><br>
<head>
    <style>
 table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
    margin-left: auto;
    margin-right: auto;
  }
</style>
</head>

<!-- <div class="container">
    <div class="row">
      <div class="col col-md-8" style="overflow-y: scroll; max-height: 100vh">
        <form [formGroup]="jobForm" (ngSubmit)="addStock(readerObj.company_code_fk)">
          <div class="mb-3">
            <label for="stockPrice" class="form-label"></label>
            <input
              type="number"
              class="form-control"
              id="stockPrice"
              placeholder="Enter stock price"
formControlName="stockPrice"
[(ngModel)]="readerObj.stockPrice"
/>
</div>
<div class="mb-3">
<label for="setAt" class="form-label"></label>
<input
type="text"
class="form-control"
id="setAt"
formControlName="setAt"
placeholder="Enter time"
[(ngModel)]="readerObj.setAt"
/>
</div>
<div class="mb-3">
<label for="company_code_fk" class="form-label"></label>
<input
type="number"
class="form-control"
id="company_code_fk"
formControlName="company_code_fk"
placeholder="Enter company code"
[(ngModel)]="readerObj.company_code_fk"
/>
</div>

<!-- <button type="submit" class="btn btn-primary">Submit</button> -->
<!-- <button type="submit" mat-raised-button color="primary">Add Stock Details</button>
</form>
</div> -->
<!-- <div class="col col-md-4">
<div style="position: fixed">{{ preview }}</div>
</div> -->
<!-- </div> -->
<!-- </div>  -->

<!-- Working form -->
<!-- <div>
<form #stockForm="ngForm" (ngSubmit)="addStock(readerObj.company_code_fk)">
<!-- <input name="readerList" class="form-control" type="text" placeholder="Enter name" [(ngModel)]="readerObj.readerList" required>
<br> -->
<!-- <input name="stockPrice" class="form-control" type="number" placeholder="Enter stock price" [(ngModel)]="readerObj.stockPrice" required>
<br> 
<br>  -->
<!-- <input name="setAt" class="form-control" type="text" placeholder="Enter time" [(ngModel)]="readerObj.setAt" required>
<br> -->
<!-- <input name="company_code_fk" class="form-control" type="number" placeholder="Enter company code" [(ngModel)]="readerObj.company_code_fk" required>
<br><br> -->
<!-- <br><br>
<button type="submit" mat-raised-button color="primary">Add Stock Details</button> -->
<!-- <button mat-raised-button color="accent" type="submit">Add Stock Details</button> -->
<!-- </form>
</div>   --> 

<div class = "Simple example" style="text-align:center ;">  
    <mat-form-field appearance = "fill">  
      <mat-label> Enter Stock Price </mat-label>  
      <input type="number" matInput [(ngModel)]="readerObj.stockPrice">  
    </mat-form-field>  
    <br>  
    <mat-form-field appearance = "fill">  
      <mat-label> Enter Time </mat-label>  
      <input type="text" matInput [(ngModel)]="readerObj.setAt">  
    </mat-form-field>  
    <br>  
    <br>
    <button (click)=addStock(readerObj.company_code_fk) class="btn btn-success" mat-raised-button color="primary">
      Add Stock
    </button>
    <br>
      <br><br>
    </div>

<!-- <div class = "Simple example" style="text-align:center ;">  
    <mat-form-field appearance = "fill">  
      <!-- <form> -->
        <!-- <mat-label> Enter Stock Price </mat-label>  
      <input matInput [(ngModel)]="readerObj.stockPrice">  
    </mat-form-field>   -->
    <!-- <br>  
    <mat-form-field appearance = "fill">  
      <mat-label> Enter TimeStamp </mat-label>  
      <input matInput [(ngModel)]="readerObj.setAt">  
    </mat-form-field>    
    <br>  
    <br>
    <button type="submit" mat-raised-button color="primary">Add Stock Details</button>  -->
<!-- </form> -->
    <!-- </div> -->

<!-- {{data}} -->


<!-- <hr> -->

<!-- <button type="submit">View stock List</button><br><br> -->

<!-- <hr> -->

<div>
    <div style="text-align:center">
    <!-- <button type="button" (click)="getAllStocks(bookm.company_code_fk)">View stock List</button><br><br> -->
    </div>

    <!-- Added missing end -->
    </div>

<!-- <div style="text-align:center">
    <div id="searchDiv">
        <input type="number" [(ngModel)]="bookm.company_code_fk"> <br><br>
        <button type="button" class="btn btn-info" (click)="getAllStocks(bookm.company_code_fk)" button mat-raised-button color="primary">View</button>
        <!-- <button type="button" class="btn btn-info" (click)="getAllStocks()">View</button> -->
        <!-- </div>
    </div>  -->

    <br>
<!-- <div class="table-body" style="text-align:center">
                <table id="tblMain3" border>
                    <thead>
                        <tr>                          
                            <th><span>transactionId</span></th>
                            <th><span>stockPrice</span></th>
                            <th><span>setAt</span></th>
                            <th><span>company_code_fk</span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-container *ngFor="let item of bookData">
                        <tr ng-if="item.stockPrice>'50'">
                            <td ><span>{{item.transactionId}}</span></td>
                            <td ><span>{{item.stockPrice}}</span></td>
                            <td ><span>{{item.setAt}}</span></td>
                            <td ><span>{{item.company_code_fk}}</span></td>
                        </tr>
                    </ng-container>
                    </tbody>
                </table>
                </div> -->

                <div class="filter-class" style="text-align:center ;">                
                <mat-form-field appearance="legacy" (click)="filterDate()">
                  <mat-label style="font-weight:bold ;">Choose Date Range</mat-label>
                  <mat-date-range-input [rangePicker]="picker" [formGroup]="dateRange">
                    <input matStartDate formControlName="start" placeholder="Start Date">
                    <input matEndDate formControlName="end" placeholder="End Date">
                  </mat-date-range-input>
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-date-range-picker #picker></mat-date-range-picker>
                </mat-form-field>
                <br>
                <!-- <button type="button" (click)="filterDate()">Filter stock List</button>  -->
            </div>
            <br>


                <div class="container p-5" style="text-align:center">
                    <table class="table table-striped table-bordered table-sm row-border hover" id="tblMain3">
                        <thead>
                            <tr>                          
                                <th><span>TransactionId</span></th>
                                <th><span>StockPrice</span></th>
                                <th><span>SetAt</span></th>
                                <th><span>Company_code_fk</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let item of bookData">
                            <tr ng-if="item.stockPrice>'50'">
                                <td style="font-weight:bold"><span>{{item.transactionId}}</span></td>
                                <td style="font-weight:bold"><span>{{item.stockPrice}}</span></td>
                                <td style="font-weight:bold"><span>{{item.setAt}}</span></td>
                                <td style="font-weight:bold"><span>{{item.company_code_fk}}</span></td>
                            </tr>
                        </ng-container>
                        </tbody>
                      </table>
                </div>
<br><br>
                <div class="table-body">
                    <table id="dataTables-example" border>
                        <thead>
                            <tr>                          
                                <th><span>Average</span></th>
                                <th><span>Max</span></th>
                                <th><span>Min</span></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight:bold"><span>{{averageStockPrice}}</span></td>
                                <td style="font-weight:bold"><span>{{maxStockPrice}}</span></td>
                                <td style="font-weight:bold"><span>{{minStockPrice}}</span></td>
                            </tr>
                
                        </tbody>
                    </table>
                    </div>

                    <!-- Trying mat table -->

                    <!-- <div class="mat-elevation-z8">
                    <mat-table [dataSource] = "listData"> 
                        <ng-container matColumnDef = "stockPrice">
                           <th mat-header-cell *matHeaderCellDef> Dessert (100g)</th>
                           <td mat-cell *matCellDef = "let item"> {{item.transactionId}} </td>
                        </ng-container>
                        <ng-container matColumnDef = "calories">
                           <th mat-header-cell *matHeaderCellDef>Calories</th>
                           <td mat-cell *matCellDef = "let item"> {{item.stockPrice}} </td>
                        </ng-container>
                        <tr mat-header-row *matHeaderRowDef = "displayedColumns"></tr>
                        <tr mat-row *matRowDef = "let row; columns: displayedColumns;"></tr>
                        </mat-table>
                    </div> -->


                    <br><br>
                <div class="form-inline" style="text-align:center">
                    <button type="button" class="btn btn-success" (click)="getAverageStockPrice()" mat-raised-button color="primary">Fetch all details</button>
                    <br><br>
                    <button type="button" (click)="createChart()" style="text-align:center ;"mat-raised-button color="primary">Show Graph</button>    
                </div>


                    <!-- <div class="container text-center">
                        <div class="row">
                           <div class="col-sm-3 mb-3">
                             <div class="form-group">
                               <label for="sel1" class="form-label">Date Filter:</label>
                               <input class="form-control" type="date" class="dateadded form-control">
                             </div>
                           </div>
                         </div> -->

                        



                         <!-- <div class="form-group">
                            <label for="sel1" class="form-label">Date Range Filter:</label>
                            <input class="dateadded form-control" type="text" name="daterangeInput" daterangepicker (selected)="selectedDate($event, daterange)" />
                   </div> -->

                   <!-- app.filter('dateRange', function () {
                    return function (users, startDate, endDate) {
                        var result = [];
                
                        var from_date = Date.parse(startDate);
                        var to_date = Date.parse(endDate);
                        //console.log(from_date, to_date);
                
                        angular.forEach(users, function (user) {
                            if (user.date > from_date && user.date < to_date) {
                                result.push(user);
                            }
                        });
                        return result;
                    };
                }); -->

<div *ngFor="let r of readerList">
    <!-- {{r.company_code_fk}}->{{r.stockPrice}}->{{r.setAt}}--!<br> -->
    <!-- <button type="button" (click)="getAllStocks(r.company_code_fk)">View stock List</button><br><br> -->
</div>

<br><br>
<div class="chart-container" style="width:50%; text-align: center; align-self: center; margin-left: 25%;">
    <canvas  id="MyChart" style="text-align:center ;align-self: center;">{{ chart }}</canvas>
</div>
<br><br>

<footer class="page-footer font-small blue" style="background-color:black;width:100%;height: 60px;text-align : center; ">
    <div class="footer-copyright text-center py-3">  
      <p style="text-align:center; font-size:15px; top: 50%; color: azure;">Learn Stock Market, Trading and Investment for free!<p></p>
      <a href="/" style="color:white ;"> Traders.com</a>
    </div>
  </footer>
</body>

<!-- </div>
</body> -->
